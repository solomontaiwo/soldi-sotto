import{r as o,b as H,z as I,d as M,e as B,j as e,m,f as p,aq as D,U,Q as G,ar as j,as as y,at as v,ah as W,au as q,ax as Q,aw as O,Z as Y,Y as N,q as k,s as S}from"./index-DhPDyLgL.js";import{A as Z}from"./Alert-BqVq1Us6.js";import{F as s}from"./Form-DqIPrd7s.js";import"./hook-mgdtgGYD.js";import"./Col-BtPTxbzW.js";import"./useEventCallback-BQY3u4oO.js";const ee=()=>{const[i,L]=o.useState(""),[u,C]=o.useState(""),[d,R]=o.useState(""),[g,z]=o.useState(""),[x,P]=o.useState(!1),[b,E]=o.useState(!1),[F,n]=o.useState(!1),[h,l]=o.useState(""),f=H(),A=I(),w=M({maxWidth:768}),{t:r}=B(),T=async a=>{if(a.preventDefault(),n(!0),l(""),i.length<3){l("L'username deve essere di almeno 3 caratteri"),n(!1);return}if(d!==g){l("Le password non coincidono"),n(!1);return}if(d.length<6){l("La password deve essere di almeno 6 caratteri"),n(!1);return}try{const t=(await Q(O,u,d)).user;await Y(t,{displayName:i}),await N(k(S,"users",t.uid),{username:i.toLowerCase(),email:u.toLowerCase(),displayName:i,createdAt:new Date,updatedAt:new Date}),await N(k(S,"usernames",i.toLowerCase()),{uid:t.uid,createdAt:new Date}),A.success(r("errors.accountCreatedSuccess")),f("/dashboard")}catch(c){console.error("Errore durante la registrazione:",c);let t=r("errors.registrationError");switch(c.code){case"auth/email-already-in-use":t=r("errors.emailAlreadyInUse");break;case"auth/invalid-email":t=r("errors.invalidEmail");break;case"auth/weak-password":t=r("errors.weakPassword");break;case"auth/operation-not-allowed":t=r("errors.operationNotAllowed");break;default:t=c.message}l(t)}finally{n(!1)}};return e.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center",style:{background:"var(--background-primary, #f8fafc)",padding:w?"8px":"24px",position:"relative"},children:e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},style:{width:"100%",maxWidth:"370px",position:"relative"},children:[e.jsx(m.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},className:"mb-3",children:e.jsxs(p,{variant:"link",onClick:()=>f("/"),className:"text-decoration-none p-0 d-flex align-items-center gap-2",style:{fontSize:"13px",background:"rgba(255,255,255,0.18)",borderRadius:"10px",padding:"6px 14px",border:"1px solid rgba(0,0,0,0.07)",color:"#222",backdropFilter:"blur(8px)",transition:"all 0.2s ease"},onMouseEnter:a=>{a.currentTarget.style.background="rgba(0,0,0,0.08)"},onMouseLeave:a=>{a.currentTarget.style.background="rgba(255,255,255,0.18)"},children:[e.jsx(D,{size:15}),r("register.backToHome")]})}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.72)",borderRadius:"18px",border:"1px solid rgba(0,0,0,0.06)",boxShadow:"0 2px 16px rgba(0,0,0,0.06)",padding:w?"16px":"22px",position:"relative",backdropFilter:"blur(12px)",willChange:"transform"},children:[e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-center mb-3",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-2 mb-2",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"38px",height:"38px",background:"rgba(16,185,129,0.13)",color:"#10b981",fontSize:"18px"},children:"🚀"}),e.jsxs("div",{className:"text-start",children:[e.jsx("h2",{className:"fw-semibold text-dark mb-0",style:{fontSize:"1.25rem"},children:r("register.title")}),e.jsx("small",{className:"text-muted",style:{fontSize:"0.95rem"},children:r("register.subtitle")})]})]})}),h&&e.jsx(m.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mb-3",children:e.jsx(Z,{variant:"danger",className:"border-0",style:{background:"rgba(239, 68, 68, 0.08)",borderRadius:"10px",border:"1px solid rgba(239, 68, 68, 0.13)",padding:"8px 12px"},children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{children:"❌"}),e.jsx("span",{style:{fontSize:"14px"},children:h})]})})}),e.jsxs(s,{onSubmit:T,autoComplete:"on",children:[e.jsxs(s.Group,{className:"mb-2",controlId:"username",children:[e.jsx(s.Label,{className:"fw-semibold small",children:r("register.username")}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text bg-transparent border-end-0",style:{padding:"0.5rem 0.7rem",fontSize:"1.1rem",color:document.documentElement.classList.contains("dark-theme")?"#fff":"#222"},children:e.jsx(U,{})}),e.jsx(s.Control,{type:"text",placeholder:r("register.usernamePlaceholder"),value:i,onChange:a=>L(a.target.value),style:{background:"rgba(255,255,255,0.7)",border:"1px solid #e5e7eb",borderRadius:"10px",borderTopLeftRadius:0,borderBottomLeftRadius:0,fontSize:"1rem",minHeight:"44px",padding:"0.5rem 1rem",color:"#222",boxShadow:"none"},autoComplete:"username"})]}),e.jsx(s.Text,{className:"text-muted small",children:r("register.usernameHelp")})]}),e.jsxs(s.Group,{className:"mb-2",controlId:"email",children:[e.jsx(s.Label,{className:"fw-semibold small",children:r("register.email")}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text bg-transparent border-end-0",style:{padding:"0.5rem 0.7rem",fontSize:"1.1rem",color:document.documentElement.classList.contains("dark-theme")?"#fff":"#222"},children:e.jsx(G,{})}),e.jsx(s.Control,{type:"email",placeholder:r("register.emailPlaceholder"),value:u,onChange:a=>C(a.target.value),style:{background:"rgba(255,255,255,0.7)",border:"1px solid #e5e7eb",borderRadius:"10px",borderTopLeftRadius:0,borderBottomLeftRadius:0,fontSize:"1rem",minHeight:"44px",padding:"0.5rem 1rem",color:"#222",boxShadow:"none"},autoComplete:"email"})]})]}),e.jsx(s.Text,{className:"text-muted small",children:r("register.usernameMin")}),e.jsxs(s.Group,{className:"mb-2",controlId:"password",children:[e.jsx(s.Label,{className:"fw-semibold small",children:r("register.password")}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text bg-transparent border-end-0",style:{padding:"0.5rem 0.7rem",fontSize:"1.1rem",color:document.documentElement.classList.contains("dark-theme")?"#fff":"#222"},children:e.jsx(j,{})}),e.jsx(s.Control,{type:x?"text":"password",placeholder:r("register.passwordPlaceholder"),value:d,onChange:a=>R(a.target.value),style:{background:"rgba(255,255,255,0.7)",border:"1px solid #e5e7eb",borderRadius:"10px",borderTopLeftRadius:0,borderBottomLeftRadius:0,fontSize:"1rem",minHeight:"44px",padding:"0.5rem 1rem",color:"#222",boxShadow:"none"},autoComplete:"new-password"}),e.jsx(p,{variant:"outline-secondary",onClick:()=>P(!x),style:{border:"none",background:"transparent",color:"#888",fontSize:"1.1rem",borderRadius:"0 10px 10px 0",minHeight:"44px"},tabIndex:-1,children:x?e.jsx(y,{}):e.jsx(v,{})})]})]}),e.jsxs(s.Group,{className:"mb-2",controlId:"confirmPassword",children:[e.jsx(s.Label,{className:"fw-semibold small",children:r("register.confirmPassword")}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text bg-transparent border-end-0",style:{padding:"0.5rem 0.7rem",fontSize:"1.1rem",color:document.documentElement.classList.contains("dark-theme")?"#fff":"#222"},children:e.jsx(j,{})}),e.jsx(s.Control,{type:b?"text":"password",placeholder:r("register.confirmPasswordPlaceholder"),value:g,onChange:a=>z(a.target.value),style:{background:"rgba(255,255,255,0.7)",border:"1px solid #e5e7eb",borderRadius:"10px",borderTopLeftRadius:0,borderBottomLeftRadius:0,fontSize:"1rem",minHeight:"44px",padding:"0.5rem 1rem",color:"#222",boxShadow:"none"},autoComplete:"new-password"}),e.jsx(p,{variant:"outline-secondary",onClick:()=>E(!b),style:{border:"none",background:"transparent",color:"#888",fontSize:"1.1rem",borderRadius:"0 10px 10px 0",minHeight:"44px"},tabIndex:-1,children:b?e.jsx(y,{}):e.jsx(v,{})})]})]}),e.jsxs(p,{type:"submit",className:"w-100 fw-semibold mt-2",style:{borderRadius:"10px",minHeight:"44px",fontSize:"1.08rem",background:"rgba(16,185,129,0.93)",color:"#fff",border:"none",boxShadow:"0 1px 6px rgba(16,185,129,0.07)",transition:"all 0.2s"},disabled:F,children:[e.jsx(W,{className:"me-2"})," ",r("register.registerButton")]}),e.jsxs("div",{className:"text-center mt-3",children:[e.jsx("span",{className:"text-muted small",children:r("register.haveAccount")})," ",e.jsx(q,{to:"/login",className:"fw-semibold",style:{color:"#0d6efd",textDecoration:"none"},children:r("register.loginNow")})]})]})]})]})})};export{ee as default};
