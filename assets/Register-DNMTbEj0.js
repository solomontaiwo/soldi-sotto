import{r,u as B,z as I,a as T,b as O,j as e,o as Q,B as N,$ as R,a0 as W,a8 as H,a1 as v,a2 as y,a3 as k,V,a5 as $,L as q,M as f,N as p,a9 as G,a7 as J,Q as K,O as C}from"./index-DssBxwp5.js";import{L as c,I as u}from"./label-BrbFPq4j.js";const _=()=>{const[l,P]=r.useState(""),[m,S]=r.useState(""),[d,L]=r.useState(""),[w,E]=r.useState(""),[x,F]=r.useState(!1),[g,A]=r.useState(!1),[D,i]=r.useState(!1),[b,n]=r.useState(""),j=B(),M=I(),z=T({maxWidth:768}),{t:s}=O(),U=async a=>{if(a.preventDefault(),i(!0),n(""),l.length<3){n(s("profile.usernameMinLength")),i(!1);return}if(d!==w){n("Le password non coincidono"),i(!1);return}if(d.length<6){n(s("errors.weakPassword")),i(!1);return}try{const t=l.trim().toLowerCase();if((await q(f(p,"usernames",t))).exists()){n(s("errors.usernameTaken")),i(!1);return}const h=(await G(J,m,d)).user;await K(h,{displayName:l}),await C(f(p,"users",h.uid),{username:t,email:m.toLowerCase(),displayName:l,createdAt:new Date,updatedAt:new Date}),await C(f(p,"usernames",t),{uid:h.uid,createdAt:new Date}),M.success(s("errors.accountCreatedSuccess")),j("/dashboard")}catch(t){console.error("Errore durante la registrazione:",t);let o=s("errors.registrationError");switch(t.code){case"auth/email-already-in-use":o=s("errors.emailAlreadyInUse");break;case"auth/invalid-email":o=s("errors.invalidEmail");break;case"auth/weak-password":o=s("errors.weakPassword");break;case"auth/operation-not-allowed":o=s("errors.operationNotAllowed");break;default:o=t.message}n(o)}finally{i(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center px-4 py-10 bg-background",children:[e.jsx("div",{className:"absolute inset-0 -z-10 bg-gradient-to-br from-primary/10 via-emerald-500/5 to-transparent"}),e.jsxs(Q.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},className:"w-full max-w-md rounded-2xl border border-border bg-card/80 p-6 shadow-2xl backdrop-blur-xl",children:[e.jsxs(N,{variant:"ghost",size:"sm",onClick:()=>j("/"),className:"mb-4 gap-2 text-muted-foreground",children:[e.jsx(R,{className:"h-4 w-4"}),s("register.backToHome")]}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-emerald-100 text-emerald-600 text-2xl",children:"ðŸš€"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:s("register.title")}),e.jsx("p",{className:"text-muted-foreground text-sm",children:s("register.subtitle")})]})]}),b&&e.jsx("div",{className:"mb-4 rounded-lg border border-destructive/40 bg-destructive/10 p-3 text-sm text-destructive",children:b}),e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"username",children:s("profile.username")}),e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-input bg-background px-3 focus-within:ring-2 focus-within:ring-ring",children:[e.jsx(W,{className:"text-muted-foreground"}),e.jsx(u,{id:"username",type:"text",placeholder:"solomon",value:l,onChange:a=>P(a.target.value),className:"border-0 shadow-none focus-visible:ring-0",autoComplete:"username"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-input bg-background px-3 focus-within:ring-2 focus-within:ring-ring",children:[e.jsx(H,{className:"text-muted-foreground"}),e.jsx(u,{id:"email",type:"email",placeholder:"you@email.com",value:m,onChange:a=>S(a.target.value),className:"border-0 shadow-none focus-visible:ring-0",autoComplete:"email"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"password",children:s("login.password")}),e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-input bg-background px-3 focus-within:ring-2 focus-within:ring-ring",children:[e.jsx(v,{className:"text-muted-foreground"}),e.jsx(u,{id:"password",type:x?"text":"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:d,onChange:a=>L(a.target.value),className:"border-0 shadow-none focus-visible:ring-0",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>F(!x),className:"text-muted-foreground",children:x?e.jsx(y,{}):e.jsx(k,{})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"confirm",children:s("register.confirmPassword")}),e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-input bg-background px-3 focus-within:ring-2 focus-within:ring-ring",children:[e.jsx(v,{className:"text-muted-foreground"}),e.jsx(u,{id:"confirm",type:g?"text":"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:w,onChange:a=>E(a.target.value),className:"border-0 shadow-none focus-visible:ring-0",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>A(!g),className:"text-muted-foreground",children:g?e.jsx(y,{}):e.jsx(k,{})})]})]}),e.jsxs(N,{type:"submit",className:"w-full gap-2",size:z?"default":"lg",disabled:D,children:[e.jsx(V,{className:"h-4 w-4"}),s("register.registerButton")]})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:[s("register.haveAccount")," ",e.jsx($,{to:"/login",className:"font-semibold text-primary",children:s("register.loginNow")})]})]})]})};export{_ as default};
