import{r as d,B as Z,j as e,u as K,a as ee,c as L,P as y,b as q,d as W,e as U,f as C,F as te,m as M,g as se,h as re,R as ae,i as ne,k as ie,l as S,n as oe,o as le,p as ce,q as de,s as me}from"./index-DCNmr1x3.js";import{T as ue}from"./TransactionModal-COwawuaV.js";import{f as xe}from"./formatCurrency-DQxE0pTn.js";import{C as v}from"./Card-Bt_fe03c.js";import{u as fe}from"./hook-BULXEYgS.js";import{d as I,u as pe,a as ge,q as he}from"./Modal-SyrgkZuq.js";import{u as be}from"./useEventCallback-XqrTujS4.js";import{R}from"./Row-C_BR9QAy.js";import{C as N}from"./Col-CnkjMeCY.js";import"./categories-BgufHZlB.js";import"./Form-B_oNmvwT.js";function ye(){const[,t]=d.useReducer(a=>a+1,0);return t}const T=d.createContext(null),D=(t,a=null)=>t!=null?String(t):a||null,A=d.createContext(null);A.displayName="NavContext";const H=d.createContext(null),ve=["as","active","eventKey"];function je(t,a){if(t==null)return{};var i={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(a.indexOf(n)>=0)continue;i[n]=t[n]}return i}function Q({key:t,onClick:a,active:i,id:n,role:m,disabled:c}){const x=d.useContext(T),u=d.useContext(A),r=d.useContext(H);let o=i;const s={role:m};if(u){!m&&u.role==="tablist"&&(s.role="tab");const f=u.getControllerId(t??null),b=u.getControlledId(t??null);s[I("event-key")]=t,s.id=f||n,o=i==null&&t!=null?u.activeKey===t:i,(o||!(r!=null&&r.unmountOnExit)&&!(r!=null&&r.mountOnEnter))&&(s["aria-controls"]=b)}return s.role==="tab"&&(s["aria-selected"]=o,o||(s.tabIndex=-1),c&&(s.tabIndex=-1,s["aria-disabled"]=!0)),s.onClick=be(f=>{c||(a?.(f),t!=null&&x&&!f.isPropagationStopped()&&x(t,f))}),[s,{isActive:o}]}const G=d.forwardRef((t,a)=>{let{as:i=Z,active:n,eventKey:m}=t,c=je(t,ve);const[x,u]=Q(Object.assign({key:D(m,c.href),active:n},c));return x[I("active")]=u.isActive,e.jsx(i,Object.assign({},c,x,{ref:a}))});G.displayName="NavItem";const we=["as","onSelect","activeKey","role","onKeyDown"];function Ne(t,a){if(t==null)return{};var i={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(a.indexOf(n)>=0)continue;i[n]=t[n]}return i}const B=()=>{},E=I("event-key"),_=d.forwardRef((t,a)=>{let{as:i="div",onSelect:n,activeKey:m,role:c,onKeyDown:x}=t,u=Ne(t,we);const r=ye(),o=d.useRef(!1),s=d.useContext(T),f=d.useContext(H);let b,l;f&&(c=c||"tablist",m=f.activeKey,b=f.getControlledId,l=f.getControllerId);const g=d.useRef(null),F=p=>{const h=g.current;if(!h)return null;const w=he(h,`[${E}]:not([aria-disabled=true])`),k=h.querySelector("[aria-selected=true]");if(!k||k!==document.activeElement)return null;const O=w.indexOf(k);if(O===-1)return null;let j=O+p;return j>=w.length&&(j=0),j<0&&(j=w.length-1),w[j]},$=(p,h)=>{p!=null&&(n?.(p,h),s?.(p,h))},J=p=>{if(x?.(p),!f)return;let h;switch(p.key){case"ArrowLeft":case"ArrowUp":h=F(-1);break;case"ArrowRight":case"ArrowDown":h=F(1);break;default:return}h&&(p.preventDefault(),$(h.dataset[ge("EventKey")]||null,p),o.current=!0,r())};d.useEffect(()=>{if(g.current&&o.current){const p=g.current.querySelector(`[${E}][aria-selected=true]`);p?.focus()}o.current=!1});const X=pe(a,g);return e.jsx(T.Provider,{value:$,children:e.jsx(A.Provider,{value:{role:c,activeKey:D(m),getControlledId:b||B,getControllerId:l||B},children:e.jsx(i,Object.assign({},u,{onKeyDown:J,ref:X,role:c}))})})});_.displayName="Nav";const ke=Object.assign(_,{Item:G}),V=d.forwardRef(({bsPrefix:t,active:a,disabled:i,eventKey:n,className:m,variant:c,action:x,as:u,...r},o)=>{t=K(t,"list-group-item");const[s,f]=Q({key:D(n,r.href),active:a,...r}),b=ee(g=>{if(i){g.preventDefault(),g.stopPropagation();return}s.onClick(g)});i&&r.tabIndex===void 0&&(r.tabIndex=-1,r["aria-disabled"]=!0);const l=u||(x?r.href?"a":"button":"div");return e.jsx(l,{ref:o,...r,...s,onClick:b,className:L(m,t,f.isActive&&"active",i&&"disabled",c&&`${t}-${c}`,x&&`${t}-action`)})});V.displayName="ListGroupItem";const Y=d.forwardRef((t,a)=>{const{className:i,bsPrefix:n,variant:m,horizontal:c,numbered:x,as:u="div",...r}=fe(t,{activeKey:"onSelect"}),o=K(n,"list-group");let s;return c&&(s=c===!0?"horizontal":`horizontal-${c}`),e.jsx(ke,{ref:a,...r,as:u,className:L(i,o,m&&`${o}-${m}`,s&&`${o}-${s}`,x&&`${o}-numbered`)})});Y.displayName="ListGroup";const P=Object.assign(Y,{Item:V}),z=({transactions:t=[]})=>{z.propTypes={transactions:y.arrayOf(y.shape({id:y.string.isRequired,description:y.string.isRequired,amount:y.number.isRequired,type:y.oneOf(["income","expense"]).isRequired,date:y.object.isRequired,category:y.string}))};const a=q(),i=W({maxWidth:768}),{t:n}=U(),m=t.slice(0,5),c=r=>(r.toDate?r.toDate():new Date(r)).toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"}),x=r=>r==="income"?e.jsx(se,{style:{color:"#198754"}}):e.jsx(re,{style:{color:"#dc3545"}}),u=r=>r?n("categories."+r):"";return m.length===0?e.jsx(v,{className:"border-0 shadow-sm",style:{borderRadius:"2rem",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:e.jsxs(v.Body,{className:"text-center p-5",children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"ðŸ“‹"}),e.jsx("h5",{className:"text-muted mb-3",children:n("recentTransactions.emptyTitle")}),e.jsx("p",{className:"text-muted mb-4",children:n("recentTransactions.emptyDescription")}),e.jsx(C,{variant:"primary",onClick:()=>a("/transactions"),style:{borderRadius:"20px",paddingLeft:"2rem",paddingRight:"2rem"},children:n("recentTransactions.addFirst")})]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("h4",{className:"text-dark fw-semibold mb-0",children:n("recentTransactions.title")}),e.jsxs(C,{variant:"link",onClick:()=>a("/transactions"),className:"text-primary text-decoration-none p-0 d-flex align-items-center gap-2",children:[n("recentTransactions.viewAll"),e.jsx(te,{size:16})]})]}),e.jsxs(v,{className:"border-0 shadow-sm recent-transactions-card",style:{borderRadius:"2rem",background:"rgba(255,255,255,0.04)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",border:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx(P,{variant:"flush",children:m.map((r,o)=>e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:o*.1},children:e.jsx(P.Item,{className:"border-0 py-3 px-4",style:{cursor:"pointer",transition:"background-color 0.2s ease",backgroundColor:"transparent",borderRadius:o===0?"2rem 2rem 0 0":o===m.length-1?"0 0 2rem 2rem":"0"},onMouseEnter:s=>{s.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.05)"},onMouseLeave:s=>{s.currentTarget.style.backgroundColor="transparent"},onClick:()=>a("/transactions"),children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between w-100",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3 flex-grow-1",style:{minWidth:0},children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"40px",height:"40px",backgroundColor:r.type==="income"?"rgba(25, 135, 84, 0.1)":"rgba(220, 53, 69, 0.1)",fontSize:"20px"},children:x(r.type)}),e.jsxs("div",{className:"flex-grow-1",style:{minWidth:0},children:[e.jsx("div",{className:"fw-medium text-dark mb-1",style:{fontSize:"1rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.description}),e.jsxs("div",{className:"d-flex align-items-center gap-2 text-muted small",children:[e.jsx("span",{children:c(r.date)}),r.category&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{style:{textTransform:"capitalize"},children:u(r.category)})]})]})]})]}),e.jsx("div",{className:"text-end flex-shrink-0",children:e.jsxs("div",{className:"fw-semibold",style:{fontSize:i?"1rem":"1.125rem",color:r.type==="income"?"#198754":"#dc3545"},children:[r.type==="income"?"+":"-",xe(r.amount)]})})]})})},r.id))}),e.jsx(v.Footer,{className:"border-0 text-center py-3",style:{background:"rgba(255,255,255,0.04)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",borderRadius:"0 0 2rem 2rem",borderTop:"1px solid rgba(255,255,255,0.08)"},children:e.jsxs(C,{variant:"link",onClick:()=>a("/transactions"),className:"text-primary text-decoration-none small fw-medium",children:[n("recentTransactions.manageAll")," â†’"]})})]})]})},Ce=()=>{const t=q(),{currentUser:a}=ne(),{transactions:i,isDemo:n,canAddMoreTransactions:m}=ie(),[c,x]=d.useState(!1),u=W({maxWidth:768}),[r,o]=d.useState(""),{t:s}=U();d.useEffect(()=>{(async()=>{if(a?.uid){const g=await ce(de(me,"users",a.uid));g.exists()?o(g.data().username||a.displayName||a.email?.split("@")[0]||""):o(a.displayName||a.email?.split("@")[0]||"")}})()},[a]);const f=d.useMemo(()=>[{key:"add-transaction",title:`âž• ${s("addTransaction")}`,subtitle:s("whatToRegister"),icon:e.jsx(S,{size:24}),color:"var(--accent-primary)",bgColor:"var(--pastel-sky)",action:()=>x(!0),disabled:n&&!m,primary:!0},{key:"view-transactions",title:`ðŸ“‹ ${s("manageAll")}`,subtitle:s("yourTransactions"),icon:e.jsx(oe,{size:24}),color:"var(--accent-info)",bgColor:"var(--pastel-sky)",action:()=>t("/transactions")},{key:"view-analytics",title:`ðŸ“Š ${s("navbar.analytics")}`,subtitle:s("landing.mainFeatures"),icon:e.jsx(le,{size:24}),color:"var(--accent-warning)",bgColor:"var(--pastel-cream)",action:()=>t("/analytics")}],[n,m,t,s]),b=l=>{l.disabled||l.action()};return e.jsxs("div",{style:{padding:u?"0.5rem 0.5rem 1.5rem 0.5rem":"2.5rem 0 0 0",maxWidth:"1200px",margin:"0 auto",color:"var(--text-primary)",boxSizing:"border-box",display:"flex",flexDirection:"column",gap:u?"0.5rem":"1.5rem",minHeight:0,background:"var(--background-primary)"},children:[u?e.jsxs("div",{style:{width:"100%",margin:0,padding:0},children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h2",{className:"text-dark fw-bold mb-1",style:{fontSize:"1.35rem"},children:a?s("welcome",{name:r}):s("welcome",{name:"Demo"})}),e.jsx("div",{className:"text-primary fw-medium mb-2",style:{fontSize:"1rem",opacity:.85},children:e.jsx("span",{style:{fontStyle:"italic"},children:s("motivationalQuote")})}),e.jsxs("h3",{className:"text-dark fw-semibold mb-2 d-flex align-items-center gap-2",style:{fontSize:"1.1rem"},children:[e.jsx(S,{size:18})," ",s("quickActions")]}),e.jsx(R,{className:"g-2",children:f.map(l=>e.jsx(N,{xs:12,children:e.jsx(v,{className:"border-0 shadow-sm glass-card dashboard-glass",onClick:()=>b(l),style:{background:"linear-gradient(135deg, rgba(255,255,255,0.92) 0%, rgba(245,245,255,0.82) 100%)",backdropFilter:"blur(18px)",WebkitBackdropFilter:"blur(18px)",border:"1.5px solid rgba(255,255,255,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.08)",borderRadius:"18px",minHeight:60,marginBottom:0,overflow:"hidden",padding:0},children:e.jsxs(v.Body,{className:"d-flex flex-row align-items-center justify-content-start gap-3 p-3",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px",backgroundColor:l.color+"20",color:l.color},children:l.icon}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"fw-semibold text-dark",style:{fontSize:"1rem",lineHeight:"1.2"},children:l.title}),e.jsx("div",{className:"text-muted small",style:{fontSize:"0.85rem",opacity:.8},children:l.subtitle})]})]})})},l.key))})]}),e.jsx(z,{transactions:i})]}):e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-3",style:{flex:1,minHeight:0},children:e.jsxs(R,{className:"g-3 align-items-start",style:{height:"100%"},children:[e.jsx(N,{xs:12,md:6,lg:6,style:{display:"flex",flexDirection:"column",height:"100%"},children:e.jsxs("div",{className:"h-100 d-flex flex-column justify-content-start",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h2",{className:"text-dark fw-bold mb-1",style:{fontSize:"2.1rem",marginTop:"0.5rem"},children:a?s("welcome",{name:r}):s("welcome",{name:"Demo"})}),e.jsx("div",{className:"text-primary fw-medium mb-2",style:{fontSize:"1.1rem",opacity:.85},children:e.jsx("span",{style:{fontStyle:"italic"},children:s("motivationalQuote")})})]}),e.jsxs("h3",{className:"text-dark fw-semibold mb-2 d-flex align-items-center gap-2",style:{fontSize:"1.15rem"},children:[e.jsx(S,{size:20})," ",s("quickActions")]}),e.jsx(R,{className:"g-2",children:f.map(l=>e.jsx(N,{xs:12,sm:12,md:12,lg:12,xxl:12,className:"mb-2",children:e.jsx(v,{className:"border-0 shadow-sm glass-card dashboard-glass",onClick:()=>b(l),style:{background:"linear-gradient(135deg, rgba(255,255,255,0.92) 0%, rgba(245,245,255,0.82) 100%)",backdropFilter:"blur(18px)",WebkitBackdropFilter:"blur(18px)",border:"1.5px solid rgba(255,255,255,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.08)",borderRadius:"18px",minHeight:60,marginBottom:0,overflow:"hidden",padding:0},children:e.jsxs(v.Body,{className:"d-flex flex-row align-items-center justify-content-start gap-3 p-3",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px",backgroundColor:l.color+"20",color:l.color},children:l.icon}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"fw-semibold text-dark",style:{fontSize:"1rem",lineHeight:"1.2"},children:l.title}),e.jsx("div",{className:"text-muted small",style:{fontSize:"0.85rem",opacity:.8},children:l.subtitle})]})]})})},l.key))})]})}),e.jsx(N,{xs:12,lg:6,style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"flex-start"},children:e.jsx(z,{transactions:i})})]})}),e.jsx(ue,{show:c,onClose:()=>x(!1),transaction:null})]})},Ee=ae.memo(Ce);export{Ee as default};
