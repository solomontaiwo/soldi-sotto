import{e as m,a as g,d as h,b as k,f as p,s as w,h as C,g as E}from"./endOfWeek-0_09HUBs.js";import{d as T}from"./differenceInDays-BUqUuyZx.js";const A=(a,n)=>{const t=new Date;switch(a){case"weekly":return{start:E(t,{weekStartsOn:1}),end:C(t,{weekStartsOn:1})};case"daily":return{start:w(t),end:p(t)};case"annually":case"year":return{start:k(t),end:h(t)};case"all":return{start:new Date(0),end:new Date};case"custom":return n?.from&&n?.to?{start:new Date(n.from),end:new Date(n.to)}:{start:g(t),end:m(t)};case"monthly":case"month":default:return{start:g(t),end:m(t)}}},S=a=>{if(!a)return null;if(a.toDate)return a.toDate();if(a.seconds)return new Date(a.seconds*1e3);const n=new Date(a);return isNaN(n.getTime())?null:n},B=(a=[],n,t)=>{const l=n?w(n):null,d=t?p(t):null;if(!l||!d)return{totalIncome:0,totalExpense:0,balance:0,dailyAverageExpense:0,transactionCount:0,categoryBreakdown:{},topCategories:[],incomeTrend:[],expenseTrend:[]};let o=0,r=0;const s={},i=[],f=[],u=a.map(e=>({...e,date:S(e.date)})).filter(e=>e.date);u.forEach(e=>{e.type==="income"?(o+=e.amount,i.push({x:e.date,y:e.amount})):e.type==="expense"&&(r+=e.amount,f.push({x:e.date,y:e.amount}),e.category&&(s[e.category]=(s[e.category]||0)+e.amount))});const y=T(d,l)+1,D=y?r/y:0,O=Object.entries(s).sort(([,e],[,c])=>c-e).slice(0,5).map(([e,c])=>({category:e,amount:c}));return{totalIncome:o,totalExpense:r,balance:o-r,dailyAverageExpense:D,transactionCount:u.length,categoryBreakdown:s,topCategories:O,incomeTrend:i,expenseTrend:f}};export{B as c,A as g};
