import{r as u,B as Z,j as e,u as K,a as ee,c as L,P as h,b as q,d as W,e as M,f as C,F as te,m as U,g as se,h as re,R as ne,i as ae,k as ie,l as R,n as oe,o as le,p as ce,q as de,s as me}from"./index-Dfnw6OGv.js";import{T as ue}from"./TransactionModal-8YSBn2aX.js";import{f as xe}from"./formatCurrency-DQxE0pTn.js";import{C as b}from"./Card-KKogQEfw.js";import{u as fe}from"./hook-DkxLrfC1.js";import{d as I,u as pe,a as ge,q as he}from"./Modal-a3j_2kkA.js";import{u as be}from"./useEventCallback-BVlm4tEg.js";import{R as S}from"./Row-CB2Q5Kky.js";import{C as N}from"./Col-ED-jduSG.js";import"./categories-EG2beeWS.js";import"./Form-BPhr4Ilg.js";function ye(){const[,s]=u.useReducer(a=>a+1,0);return s}const T=u.createContext(null),A=(s,a=null)=>s!=null?String(s):a||null,D=u.createContext(null);D.displayName="NavContext";const H=u.createContext(null),ve=["as","active","eventKey"];function je(s,a){if(s==null)return{};var o={};for(var n in s)if({}.hasOwnProperty.call(s,n)){if(a.indexOf(n)>=0)continue;o[n]=s[n]}return o}function Q({key:s,onClick:a,active:o,id:n,role:d,disabled:c}){const x=u.useContext(T),m=u.useContext(D),t=u.useContext(H);let l=o;const i={role:d};if(m){!d&&m.role==="tablist"&&(i.role="tab");const r=m.getControllerId(s??null),y=m.getControlledId(s??null);i[I("event-key")]=s,i.id=r||n,l=o==null&&s!=null?m.activeKey===s:o,(l||!(t!=null&&t.unmountOnExit)&&!(t!=null&&t.mountOnEnter))&&(i["aria-controls"]=y)}return i.role==="tab"&&(i["aria-selected"]=l,l||(i.tabIndex=-1),c&&(i.tabIndex=-1,i["aria-disabled"]=!0)),i.onClick=be(r=>{c||(a?.(r),s!=null&&x&&!r.isPropagationStopped()&&x(s,r))}),[i,{isActive:l}]}const G=u.forwardRef((s,a)=>{let{as:o=Z,active:n,eventKey:d}=s,c=je(s,ve);const[x,m]=Q(Object.assign({key:A(d,c.href),active:n},c));return x[I("active")]=m.isActive,e.jsx(o,Object.assign({},c,x,{ref:a}))});G.displayName="NavItem";const we=["as","onSelect","activeKey","role","onKeyDown"];function Ne(s,a){if(s==null)return{};var o={};for(var n in s)if({}.hasOwnProperty.call(s,n)){if(a.indexOf(n)>=0)continue;o[n]=s[n]}return o}const B=()=>{},E=I("event-key"),_=u.forwardRef((s,a)=>{let{as:o="div",onSelect:n,activeKey:d,role:c,onKeyDown:x}=s,m=Ne(s,we);const t=ye(),l=u.useRef(!1),i=u.useContext(T),r=u.useContext(H);let y,j;r&&(c=c||"tablist",d=r.activeKey,y=r.getControlledId,j=r.getControllerId);const g=u.useRef(null),F=f=>{const p=g.current;if(!p)return null;const w=he(p,`[${E}]:not([aria-disabled=true])`),k=p.querySelector("[aria-selected=true]");if(!k||k!==document.activeElement)return null;const O=w.indexOf(k);if(O===-1)return null;let v=O+f;return v>=w.length&&(v=0),v<0&&(v=w.length-1),w[v]},$=(f,p)=>{f!=null&&(n?.(f,p),i?.(f,p))},J=f=>{if(x?.(f),!r)return;let p;switch(f.key){case"ArrowLeft":case"ArrowUp":p=F(-1);break;case"ArrowRight":case"ArrowDown":p=F(1);break;default:return}p&&(f.preventDefault(),$(p.dataset[ge("EventKey")]||null,f),l.current=!0,t())};u.useEffect(()=>{if(g.current&&l.current){const f=g.current.querySelector(`[${E}][aria-selected=true]`);f?.focus()}l.current=!1});const X=pe(a,g);return e.jsx(T.Provider,{value:$,children:e.jsx(D.Provider,{value:{role:c,activeKey:A(d),getControlledId:y||B,getControllerId:j||B},children:e.jsx(o,Object.assign({},m,{onKeyDown:J,ref:X,role:c}))})})});_.displayName="Nav";const ke=Object.assign(_,{Item:G}),V=u.forwardRef(({bsPrefix:s,active:a,disabled:o,eventKey:n,className:d,variant:c,action:x,as:m,...t},l)=>{s=K(s,"list-group-item");const[i,r]=Q({key:A(n,t.href),active:a,...t}),y=ee(g=>{if(o){g.preventDefault(),g.stopPropagation();return}i.onClick(g)});o&&t.tabIndex===void 0&&(t.tabIndex=-1,t["aria-disabled"]=!0);const j=m||(x?t.href?"a":"button":"div");return e.jsx(j,{ref:l,...t,...i,onClick:y,className:L(d,s,r.isActive&&"active",o&&"disabled",c&&`${s}-${c}`,x&&`${s}-action`)})});V.displayName="ListGroupItem";const Y=u.forwardRef((s,a)=>{const{className:o,bsPrefix:n,variant:d,horizontal:c,numbered:x,as:m="div",...t}=fe(s,{activeKey:"onSelect"}),l=K(n,"list-group");let i;return c&&(i=c===!0?"horizontal":`horizontal-${c}`),e.jsx(ke,{ref:a,...t,as:m,className:L(o,l,d&&`${l}-${d}`,i&&`${l}-${i}`,x&&`${l}-numbered`)})});Y.displayName="ListGroup";const P=Object.assign(Y,{Item:V}),z=({transactions:s=[]})=>{z.propTypes={transactions:h.arrayOf(h.shape({id:h.string.isRequired,description:h.string.isRequired,amount:h.number.isRequired,type:h.oneOf(["income","expense"]).isRequired,date:h.object.isRequired,category:h.string}))};const a=q(),o=W({maxWidth:768}),{t:n}=M(),d=s.slice(0,5),c=t=>(t.toDate?t.toDate():new Date(t)).toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"}),x=t=>t==="income"?e.jsx(se,{style:{color:"#198754"}}):e.jsx(re,{style:{color:"#dc3545"}}),m=t=>t?n("categories."+t):"";return d.length===0?e.jsx(b,{className:"border-0 shadow-sm",style:{borderRadius:"2rem",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:e.jsxs(b.Body,{className:"text-center p-5",children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"ðŸ“‹"}),e.jsx("h5",{className:"text-muted mb-3",children:n("recentTransactions.emptyTitle")}),e.jsx("p",{className:"text-muted mb-4",children:n("recentTransactions.emptyDescription")}),e.jsx(C,{variant:"primary",onClick:()=>a("/transactions"),style:{borderRadius:"20px",paddingLeft:"2rem",paddingRight:"2rem"},children:n("recentTransactions.addFirst")})]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("h4",{className:"text-dark fw-semibold mb-0",children:n("recentTransactions.title")}),e.jsxs(C,{variant:"link",onClick:()=>a("/transactions"),className:"text-primary text-decoration-none p-0 d-flex align-items-center gap-2",children:[n("recentTransactions.viewAll"),e.jsx(te,{size:16})]})]}),e.jsxs(b,{className:"border-0 shadow-sm recent-transactions-card",style:{borderRadius:"2rem",background:"rgba(255,255,255,0.04)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",border:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx(P,{variant:"flush",children:d.map((t,l)=>e.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:l*.1},children:e.jsx(P.Item,{className:"border-0 py-3 px-4",style:{cursor:"pointer",transition:"background-color 0.2s ease",backgroundColor:"transparent",borderRadius:l===0?"2rem 2rem 0 0":l===d.length-1?"0 0 2rem 2rem":"0"},onMouseEnter:i=>{i.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.05)"},onMouseLeave:i=>{i.currentTarget.style.backgroundColor="transparent"},onClick:()=>a("/transactions"),children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between w-100",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3 flex-grow-1",style:{minWidth:0},children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"40px",height:"40px",backgroundColor:t.type==="income"?"rgba(25, 135, 84, 0.1)":"rgba(220, 53, 69, 0.1)",fontSize:"20px"},children:x(t.type)}),e.jsxs("div",{className:"flex-grow-1",style:{minWidth:0},children:[e.jsx("div",{className:"fw-medium text-dark mb-1",style:{fontSize:"1rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.description}),e.jsxs("div",{className:"d-flex align-items-center gap-2 text-muted small",children:[e.jsx("span",{children:c(t.date)}),t.category&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{style:{textTransform:"capitalize"},children:m(t.category)})]})]})]})]}),e.jsx("div",{className:"text-end flex-shrink-0",children:e.jsxs("div",{className:"fw-semibold",style:{fontSize:o?"1rem":"1.125rem",color:t.type==="income"?"#198754":"#dc3545"},children:[t.type==="income"?"+":"-",xe(t.amount)]})})]})})},t.id))}),e.jsx(b.Footer,{className:"border-0 text-center py-3",style:{background:"rgba(255,255,255,0.04)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",borderRadius:"0 0 2rem 2rem",borderTop:"1px solid rgba(255,255,255,0.08)"},children:e.jsxs(C,{variant:"link",onClick:()=>a("/transactions"),className:"text-primary text-decoration-none small fw-medium",children:[n("recentTransactions.manageAll")," â†’"]})})]})]})},Ce=()=>{const s=q(),{currentUser:a}=ae(),{transactions:o,isDemo:n,canAddMoreTransactions:d}=ie(),[c,x]=u.useState(!1),m=W({maxWidth:768}),{t}=M();u.useEffect(()=>{(async()=>{a?.uid&&(await ce(de(me,"users",a.uid))).exists()})()},[a]);const l=u.useMemo(()=>[{key:"add-transaction",title:`âž• ${t("addTransaction")}`,subtitle:t("whatToRegister"),icon:e.jsx(R,{size:24}),color:"var(--accent-primary)",bgColor:"var(--pastel-sky)",action:()=>x(!0),disabled:n&&!d,primary:!0},{key:"view-transactions",title:`ðŸ“‹ ${t("manageAll")}`,subtitle:t("yourTransactions"),icon:e.jsx(oe,{size:24}),color:"var(--accent-info)",bgColor:"var(--pastel-sky)",action:()=>s("/transactions")},{key:"view-analytics",title:`ðŸ“Š ${t("navbar.analytics")}`,subtitle:t("landing.mainFeatures"),icon:e.jsx(le,{size:24}),color:"var(--accent-warning)",bgColor:"var(--pastel-cream)",action:()=>s("/analytics")}],[n,d,s,t]),i=r=>{r.disabled||r.action()};return e.jsxs("div",{style:{padding:m?"0.5rem 0.5rem 1.5rem 0.5rem":"2.5rem 0 0 0",maxWidth:"1200px",margin:"0 auto",color:"var(--text-primary)",boxSizing:"border-box",display:"flex",flexDirection:"column",gap:m?"0.5rem":"1.5rem",minHeight:0,background:"var(--background-primary)"},children:[m?e.jsxs("div",{style:{width:"100%",margin:0,padding:0},children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h2",{className:"text-dark fw-bold mb-1",style:{fontSize:"1.35rem"},children:t("welcome")}),e.jsx("div",{className:"text-primary fw-medium mb-2",style:{fontSize:"1rem",opacity:.85},children:e.jsx("span",{style:{fontStyle:"italic"},children:t("motivationalQuote")})}),e.jsxs("h3",{className:"text-dark fw-semibold mb-2 d-flex align-items-center gap-2",style:{fontSize:"1.1rem"},children:[e.jsx(R,{size:18})," ",t("quickActions")]}),e.jsx(S,{className:"g-2",children:l.map(r=>e.jsx(N,{xs:12,children:e.jsx(b,{className:"border-0 shadow-sm glass-card dashboard-glass",onClick:()=>i(r),style:{background:"linear-gradient(135deg, rgba(255,255,255,0.92) 0%, rgba(245,245,255,0.82) 100%)",backdropFilter:"blur(18px)",WebkitBackdropFilter:"blur(18px)",border:"1.5px solid rgba(255,255,255,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.08)",borderRadius:"18px",minHeight:60,marginBottom:0,overflow:"hidden",padding:0},children:e.jsxs(b.Body,{className:"d-flex flex-row align-items-center justify-content-start gap-3 p-3",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px",backgroundColor:r.color+"20",color:r.color},children:r.icon}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"fw-semibold text-dark",style:{fontSize:"1rem",lineHeight:"1.2"},children:r.title}),e.jsx("div",{className:"text-muted small",style:{fontSize:"0.85rem",opacity:.8},children:r.subtitle})]})]})})},r.key))})]}),e.jsx(z,{transactions:o})]}):e.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-3",style:{flex:1,minHeight:0},children:e.jsxs(S,{className:"g-3 align-items-start",style:{height:"100%"},children:[e.jsx(N,{xs:12,md:6,lg:6,style:{display:"flex",flexDirection:"column",height:"100%"},children:e.jsxs("div",{className:"h-100 d-flex flex-column justify-content-start",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h2",{className:"text-dark fw-bold mb-1",style:{fontSize:"2.1rem",marginTop:"0.5rem"},children:t("welcome")}),e.jsx("div",{className:"text-primary fw-medium mb-2",style:{fontSize:"1.1rem",opacity:.85},children:e.jsx("span",{style:{fontStyle:"italic"},children:t("motivationalQuote")})})]}),e.jsxs("h3",{className:"text-dark fw-semibold mb-2 d-flex align-items-center gap-2",style:{fontSize:"1.15rem"},children:[e.jsx(R,{size:20})," ",t("quickActions")]}),e.jsx(S,{className:"g-2",children:l.map(r=>e.jsx(N,{xs:12,sm:12,md:12,lg:12,xxl:12,className:"mb-2",children:e.jsx(b,{className:"border-0 shadow-sm glass-card dashboard-glass",onClick:()=>i(r),style:{background:"linear-gradient(135deg, rgba(255,255,255,0.92) 0%, rgba(245,245,255,0.82) 100%)",backdropFilter:"blur(18px)",WebkitBackdropFilter:"blur(18px)",border:"1.5px solid rgba(255,255,255,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.08)",borderRadius:"18px",minHeight:60,marginBottom:0,overflow:"hidden",padding:0},children:e.jsxs(b.Body,{className:"d-flex flex-row align-items-center justify-content-start gap-3 p-3",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px",backgroundColor:r.color+"20",color:r.color},children:r.icon}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"fw-semibold text-dark",style:{fontSize:"1rem",lineHeight:"1.2"},children:r.title}),e.jsx("div",{className:"text-muted small",style:{fontSize:"0.85rem",opacity:.8},children:r.subtitle})]})]})})},r.key))})]})}),e.jsx(N,{xs:12,lg:6,style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"flex-start"},children:e.jsx(z,{transactions:o})})]})}),e.jsx(ue,{show:c,onClose:()=>x(!1),transaction:null})]})},Ee=ne.memo(Ce);export{Ee as default};
