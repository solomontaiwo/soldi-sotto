import{r as n,d as F,s as I,e as T,j as e,m as i,B as p,t as W,v as D,G,w as j,x as v,y as w,f as U,L as q,H,A as B,I as O,J as N,D as k,E as z}from"./index-Bjk7Il94.js";import{A as Y}from"./Alert-rTvYwIdw.js";import{F as s}from"./Form-DjiPExJX.js";import"./Col-Bo0QpJom.js";const V=()=>{const[l,C]=n.useState(""),[m,L]=n.useState(""),[c,S]=n.useState(""),[h,E]=n.useState(""),[u,P]=n.useState(!1),[b,A]=n.useState(!1),[g,o]=n.useState(!1),[y,d]=n.useState(""),f=F(),R=I(),r=T({maxWidth:768}),M=async a=>{if(a.preventDefault(),o(!0),d(""),l.length<3){d("L'username deve essere di almeno 3 caratteri"),o(!1);return}if(c!==h){d("Le password non coincidono"),o(!1);return}if(c.length<6){d("La password deve essere di almeno 6 caratteri"),o(!1);return}try{const t=(await H(B,m,c)).user;await O(t,{displayName:l}),await N(k(z,"users",t.uid),{username:l.toLowerCase(),email:m.toLowerCase(),displayName:l,createdAt:new Date,updatedAt:new Date}),await N(k(z,"usernames",l.toLowerCase()),{uid:t.uid,createdAt:new Date}),R.success("Account creato con successo!"),f("/dashboard")}catch(x){console.error("Errore durante la registrazione:",x);let t="Errore durante la registrazione";switch(x.code){case"auth/email-already-in-use":t="Email già in uso";break;case"auth/invalid-email":t="Email non valida";break;case"auth/weak-password":t="Password troppo debole";break;case"auth/operation-not-allowed":t="Operazione non consentita";break;default:t=x.message}d(t)}finally{o(!1)}};return e.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:r?"20px":"40px",position:"relative"},children:e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},style:{width:"100%",maxWidth:"480px",position:"relative"},children:[e.jsx(i.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},className:"mb-4",children:e.jsxs(p,{variant:"link",onClick:()=>f("/"),className:"text-decoration-none p-0 d-flex align-items-center gap-2 text-white",style:{fontSize:"14px",background:"rgba(255, 255, 255, 0.15)",borderRadius:"12px",padding:"8px 16px",border:"1px solid rgba(255, 255, 255, 0.2)",transition:"all 0.2s ease"},onMouseEnter:a=>{a.currentTarget.style.background="rgba(255, 255, 255, 0.25)"},onMouseLeave:a=>{a.currentTarget.style.background="rgba(255, 255, 255, 0.15)"},children:[e.jsx(W,{size:16}),"Torna alla Home"]})}),e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)",padding:r?"24px":"32px",position:"relative",willChange:"transform"},children:[e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-center mb-4",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-3 mb-3",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"52px",height:"52px",background:"linear-gradient(135deg, #10b981, #047857)",color:"white",fontSize:"24px"},children:"🚀"}),e.jsxs("div",{className:"text-start",children:[e.jsx("h2",{className:"fw-bold text-dark mb-0",children:"Crea Account"}),e.jsx("small",{className:"text-muted",children:"Inizia il tuo viaggio finanziario"})]})]})}),y&&e.jsx(i.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mb-4",children:e.jsx(Y,{variant:"danger",className:"border-0",style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.2)",padding:"12px 16px"},children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{children:"❌"}),e.jsx("span",{style:{fontSize:"14px"},children:y})]})})}),e.jsxs(s,{onSubmit:M,children:[e.jsxs("div",{className:`${r?"d-block":"d-flex"} gap-3 mb-3`,children:[e.jsx(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:r?"mb-3":"flex-fill",children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"fw-semibold text-dark small mb-2",children:"Username"}),e.jsxs("div",{className:"position-relative",children:[e.jsx(D,{className:"position-absolute top-50 translate-middle-y text-muted",style:{left:"14px",zIndex:10},size:16}),e.jsx(s.Control,{type:"text",placeholder:"scegli un username",value:l,onChange:a=>C(a.target.value),required:!0,className:"border-0",style:{paddingLeft:"44px",height:"48px",borderRadius:"12px",fontSize:"15px",background:"rgba(248, 249, 250, 0.8)",border:"1px solid rgba(0, 0, 0, 0.08)",fontWeight:"500"}})]}),!r&&e.jsx(s.Text,{className:"text-muted small",children:"Min. 3 caratteri"})]})}),e.jsx(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:r?"":"flex-fill",children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"fw-semibold text-dark small mb-2",children:"Email"}),e.jsxs("div",{className:"position-relative",children:[e.jsx(G,{className:"position-absolute top-50 translate-middle-y text-muted",style:{left:"14px",zIndex:10},size:16}),e.jsx(s.Control,{type:"email",placeholder:"la tua email",value:m,onChange:a=>L(a.target.value),required:!0,className:"border-0",style:{paddingLeft:"44px",height:"48px",borderRadius:"12px",fontSize:"15px",background:"rgba(248, 249, 250, 0.8)",border:"1px solid rgba(0, 0, 0, 0.08)",fontWeight:"500"}})]})]})})]}),e.jsxs("div",{className:`${r?"d-block":"d-flex"} gap-3 mb-4`,children:[e.jsx(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:r?"mb-3":"flex-fill",children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"fw-semibold text-dark small mb-2",children:"Password"}),e.jsxs("div",{className:"position-relative",children:[e.jsx(j,{className:"position-absolute top-50 translate-middle-y text-muted",style:{left:"14px",zIndex:10},size:16}),e.jsx(s.Control,{type:u?"text":"password",placeholder:"crea una password",value:c,onChange:a=>S(a.target.value),required:!0,className:"border-0",style:{paddingLeft:"44px",paddingRight:"44px",height:"48px",borderRadius:"12px",fontSize:"15px",background:"rgba(248, 249, 250, 0.8)",border:"1px solid rgba(0, 0, 0, 0.08)",fontWeight:"500"}}),e.jsx(p,{variant:"link",type:"button",onClick:()=>P(!u),className:"position-absolute top-50 translate-middle-y border-0 text-muted p-0",style:{right:"14px",zIndex:10},children:u?e.jsx(v,{size:16}):e.jsx(w,{size:16})})]})]})}),e.jsx(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6},className:r?"":"flex-fill",children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"fw-semibold text-dark small mb-2",children:"Conferma Password"}),e.jsxs("div",{className:"position-relative",children:[e.jsx(j,{className:"position-absolute top-50 translate-middle-y text-muted",style:{left:"14px",zIndex:10},size:16}),e.jsx(s.Control,{type:b?"text":"password",placeholder:"ripeti la password",value:h,onChange:a=>E(a.target.value),required:!0,className:"border-0",style:{paddingLeft:"44px",paddingRight:"44px",height:"48px",borderRadius:"12px",fontSize:"15px",background:"rgba(248, 249, 250, 0.8)",border:"1px solid rgba(0, 0, 0, 0.08)",fontWeight:"500"}}),e.jsx(p,{variant:"link",type:"button",onClick:()=>A(!b),className:"position-absolute top-50 translate-middle-y border-0 text-muted p-0",style:{right:"14px",zIndex:10},children:b?e.jsx(v,{size:16}):e.jsx(w,{size:16})})]})]})})]}),e.jsx(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.7},children:e.jsx(p,{type:"submit",disabled:g,className:"w-100 border-0 fw-semibold mb-4",style:{height:"50px",borderRadius:"12px",background:"linear-gradient(135deg, #10b981, #047857)",fontSize:"16px",transition:"transform 0.2s ease"},onMouseEnter:a=>{g||(a.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:a=>{a.currentTarget.style.transform="translateY(0)"},children:g?e.jsxs("div",{className:"d-flex align-items-center justify-content-center",children:[e.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),"Creazione account..."]}):e.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-2",children:[e.jsx(U,{size:18}),"Crea Account"]})})})]}),e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"text-center",children:e.jsxs("p",{className:"text-muted mb-0 small",children:["Hai già un account?"," ",e.jsx(q,{to:"/login",className:"text-decoration-none fw-semibold",style:{color:"#10b981",transition:"color 0.2s ease"},onMouseEnter:a=>{a.currentTarget.style.color="#047857"},onMouseLeave:a=>{a.currentTarget.style.color="#10b981"},children:"Accedi ora"})]})})]})]})})};export{V as default};
