import{r as x,B as Z,m as I,d as A,j as e,S as T,N as K,u as ee,a as te,b as se,q as re,c as P,e as ae,f as L,g as ne,P as y,h as q,i as W,k as U,l as C,F as ie,n as M,o as oe,p as le,R as ce,s as de,t as me,v as S,w as ue,x as xe,y as fe,z as pe,A as ge}from"./index-D4QZR-z-.js";import{T as he}from"./TransactionModal-B5hYM86Q.js";import{f as be}from"./formatCurrency-DQxE0pTn.js";import{C as v}from"./Card-BDBTPedc.js";import{u as ye}from"./Modal-BL1hyBeY.js";import{R}from"./Row-Czfum0a6.js";import{C as N}from"./Col-OKItE9CD.js";import"./categories-Cln8VQv8.js";import"./Form-BwjOgBNe.js";const H=x.createContext(null),ve=["as","active","eventKey"];function je(s,n){if(s==null)return{};var i={};for(var a in s)if({}.hasOwnProperty.call(s,a)){if(n.indexOf(a)>=0)continue;i[a]=s[a]}return i}function Q({key:s,onClick:n,active:i,id:a,role:d,disabled:c}){const u=x.useContext(T),m=x.useContext(K),r=x.useContext(H);let o=i;const t={role:d};if(m){!d&&m.role==="tablist"&&(t.role="tab");const f=m.getControllerId(s??null),b=m.getControlledId(s??null);t[A("event-key")]=s,t.id=f||a,o=i==null&&s!=null?m.activeKey===s:i,(o||!(r!=null&&r.unmountOnExit)&&!(r!=null&&r.mountOnEnter))&&(t["aria-controls"]=b)}return t.role==="tab"&&(t["aria-selected"]=o,o||(t.tabIndex=-1),c&&(t.tabIndex=-1,t["aria-disabled"]=!0)),t.onClick=ee(f=>{c||(n?.(f),s!=null&&u&&!f.isPropagationStopped()&&u(s,f))}),[t,{isActive:o}]}const G=x.forwardRef((s,n)=>{let{as:i=Z,active:a,eventKey:d}=s,c=je(s,ve);const[u,m]=Q(Object.assign({key:I(d,c.href),active:a},c));return u[A("active")]=m.isActive,e.jsx(i,Object.assign({},c,u,{ref:n}))});G.displayName="NavItem";const we=["as","onSelect","activeKey","role","onKeyDown"];function Ne(s,n){if(s==null)return{};var i={};for(var a in s)if({}.hasOwnProperty.call(s,a)){if(n.indexOf(a)>=0)continue;i[a]=s[a]}return i}const O=()=>{},B=A("event-key"),_=x.forwardRef((s,n)=>{let{as:i="div",onSelect:a,activeKey:d,role:c,onKeyDown:u}=s,m=Ne(s,we);const r=te(),o=x.useRef(!1),t=x.useContext(T),f=x.useContext(H);let b,l;f&&(c=c||"tablist",d=f.activeKey,b=f.getControlledId,l=f.getControllerId);const g=x.useRef(null),D=p=>{const h=g.current;if(!h)return null;const w=re(h,`[${B}]:not([aria-disabled=true])`),k=h.querySelector("[aria-selected=true]");if(!k||k!==document.activeElement)return null;const $=w.indexOf(k);if($===-1)return null;let j=$+p;return j>=w.length&&(j=0),j<0&&(j=w.length-1),w[j]},F=(p,h)=>{p!=null&&(a?.(p,h),t?.(p,h))},J=p=>{if(u?.(p),!f)return;let h;switch(p.key){case"ArrowLeft":case"ArrowUp":h=D(-1);break;case"ArrowRight":case"ArrowDown":h=D(1);break;default:return}h&&(p.preventDefault(),F(h.dataset[se("EventKey")]||null,p),o.current=!0,r())};x.useEffect(()=>{if(g.current&&o.current){const p=g.current.querySelector(`[${B}][aria-selected=true]`);p?.focus()}o.current=!1});const X=ye(n,g);return e.jsx(T.Provider,{value:F,children:e.jsx(K.Provider,{value:{role:c,activeKey:I(d),getControlledId:b||O,getControllerId:l||O},children:e.jsx(i,Object.assign({},m,{onKeyDown:J,ref:X,role:c}))})})});_.displayName="Nav";const ke=Object.assign(_,{Item:G}),V=x.forwardRef(({bsPrefix:s,active:n,disabled:i,eventKey:a,className:d,variant:c,action:u,as:m,...r},o)=>{s=P(s,"list-group-item");const[t,f]=Q({key:I(a,r.href),active:n,...r}),b=ae(g=>{if(i){g.preventDefault(),g.stopPropagation();return}t.onClick(g)});i&&r.tabIndex===void 0&&(r.tabIndex=-1,r["aria-disabled"]=!0);const l=m||(u?r.href?"a":"button":"div");return e.jsx(l,{ref:o,...r,...t,onClick:b,className:L(d,s,f.isActive&&"active",i&&"disabled",c&&`${s}-${c}`,u&&`${s}-action`)})});V.displayName="ListGroupItem";const Y=x.forwardRef((s,n)=>{const{className:i,bsPrefix:a,variant:d,horizontal:c,numbered:u,as:m="div",...r}=ne(s,{activeKey:"onSelect"}),o=P(a,"list-group");let t;return c&&(t=c===!0?"horizontal":`horizontal-${c}`),e.jsx(ke,{ref:n,...r,as:m,className:L(i,o,d&&`${o}-${d}`,t&&`${o}-${t}`,u&&`${o}-numbered`)})});Y.displayName="ListGroup";const E=Object.assign(Y,{Item:V}),z=({transactions:s=[]})=>{z.propTypes={transactions:y.arrayOf(y.shape({id:y.string.isRequired,description:y.string.isRequired,amount:y.number.isRequired,type:y.oneOf(["income","expense"]).isRequired,date:y.object.isRequired,category:y.string}))};const n=q(),i=W({maxWidth:768}),{t:a}=U(),d=s.slice(0,5),c=r=>(r.toDate?r.toDate():new Date(r)).toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"}),u=r=>r==="income"?e.jsx(oe,{style:{color:"#198754"}}):e.jsx(le,{style:{color:"#dc3545"}}),m=r=>r?a("categories."+r):"";return d.length===0?e.jsx(v,{className:"border-0 shadow-sm",style:{borderRadius:"2rem",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:e.jsxs(v.Body,{className:"text-center p-5",children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"ðŸ“‹"}),e.jsx("h5",{className:"text-muted mb-3",children:a("recentTransactions.emptyTitle")}),e.jsx("p",{className:"text-muted mb-4",children:a("recentTransactions.emptyDescription")}),e.jsx(C,{variant:"primary",onClick:()=>n("/transactions"),style:{borderRadius:"20px",paddingLeft:"2rem",paddingRight:"2rem"},children:a("recentTransactions.addFirst")})]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("h4",{className:"text-dark fw-semibold mb-0",children:a("recentTransactions.title")}),e.jsxs(C,{variant:"link",onClick:()=>n("/transactions"),className:"text-primary text-decoration-none p-0 d-flex align-items-center gap-2",children:[a("recentTransactions.viewAll"),e.jsx(ie,{size:16})]})]}),e.jsxs(v,{className:"border-0 shadow-sm recent-transactions-card",style:{borderRadius:"2rem",background:"rgba(255,255,255,0.04)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",border:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx(E,{variant:"flush",children:d.map((r,o)=>e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:o*.1},children:e.jsx(E.Item,{className:"border-0 py-3 px-4",style:{cursor:"pointer",transition:"background-color 0.2s ease",backgroundColor:"transparent",borderRadius:o===0?"2rem 2rem 0 0":o===d.length-1?"0 0 2rem 2rem":"0"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.05)"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="transparent"},onClick:()=>n("/transactions"),children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between w-100",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3 flex-grow-1",style:{minWidth:0},children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"40px",height:"40px",backgroundColor:r.type==="income"?"rgba(25, 135, 84, 0.1)":"rgba(220, 53, 69, 0.1)",fontSize:"20px"},children:u(r.type)}),e.jsxs("div",{className:"flex-grow-1",style:{minWidth:0},children:[e.jsx("div",{className:"fw-medium text-dark mb-1",style:{fontSize:"1rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.description}),e.jsxs("div",{className:"d-flex align-items-center gap-2 text-muted small",children:[e.jsx("span",{children:c(r.date)}),r.category&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{style:{textTransform:"capitalize"},children:m(r.category)})]})]})]})]}),e.jsx("div",{className:"text-end flex-shrink-0",children:e.jsxs("div",{className:"fw-semibold",style:{fontSize:i?"1rem":"1.125rem",color:r.type==="income"?"#198754":"#dc3545"},children:[r.type==="income"?"+":"-",be(r.amount)]})})]})})},r.id))}),e.jsx(v.Footer,{className:"border-0 text-center py-3",style:{background:"rgba(255,255,255,0.04)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",borderRadius:"0 0 2rem 2rem",borderTop:"1px solid rgba(255,255,255,0.08)"},children:e.jsxs(C,{variant:"link",onClick:()=>n("/transactions"),className:"text-primary text-decoration-none small fw-medium",children:[a("recentTransactions.manageAll")," â†’"]})})]})]})},Ce=()=>{const s=q(),{currentUser:n}=de(),{transactions:i,isDemo:a,canAddMoreTransactions:d}=me(),[c,u]=x.useState(!1),m=W({maxWidth:768}),[r,o]=x.useState(""),{t}=U();x.useEffect(()=>{(async()=>{if(n?.uid){const g=await fe(pe(ge,"users",n.uid));g.exists()?o(g.data().username||n.displayName||n.email?.split("@")[0]||""):o(n.displayName||n.email?.split("@")[0]||"")}})()},[n]);const f=x.useMemo(()=>[{key:"add-transaction",title:`âž• ${t("addTransaction")}`,subtitle:t("whatToRegister"),icon:e.jsx(S,{size:24}),color:"var(--accent-primary)",bgColor:"var(--pastel-sky)",action:()=>u(!0),disabled:a&&!d,primary:!0},{key:"view-transactions",title:`ðŸ“‹ ${t("manageAll")}`,subtitle:t("yourTransactions"),icon:e.jsx(ue,{size:24}),color:"var(--accent-info)",bgColor:"var(--pastel-sky)",action:()=>s("/transactions")},{key:"view-analytics",title:`ðŸ“Š ${t("navbar.analytics")}`,subtitle:t("landing.mainFeatures"),icon:e.jsx(xe,{size:24}),color:"var(--accent-warning)",bgColor:"var(--pastel-cream)",action:()=>s("/analytics")}],[a,d,s,t]),b=l=>{l.disabled||l.action()};return e.jsxs("div",{style:{padding:m?"0.5rem 0.5rem 1.5rem 0.5rem":"2.5rem 0 0 0",maxWidth:"1200px",margin:"0 auto",color:"var(--text-primary)",boxSizing:"border-box",display:"flex",flexDirection:"column",gap:m?"0.5rem":"1.5rem",minHeight:0,background:"var(--background-primary)"},children:[m?e.jsxs("div",{style:{width:"100%",margin:0,padding:0},children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h2",{className:"text-dark fw-bold mb-1",style:{fontSize:"1.35rem"},children:n?t("welcome",{name:r}):t("welcome",{name:"Demo"})}),e.jsx("div",{className:"text-primary fw-medium mb-2",style:{fontSize:"1rem",opacity:.85},children:e.jsx("span",{style:{fontStyle:"italic"},children:t("motivationalQuote")})}),e.jsxs("h3",{className:"text-dark fw-semibold mb-2 d-flex align-items-center gap-2",style:{fontSize:"1.1rem"},children:[e.jsx(S,{size:18})," ",t("quickActions")]}),e.jsx(R,{className:"g-2",children:f.map(l=>e.jsx(N,{xs:12,children:e.jsx(v,{className:"border-0 shadow-sm glass-card dashboard-glass",onClick:()=>b(l),style:{background:"linear-gradient(135deg, rgba(255,255,255,0.92) 0%, rgba(245,245,255,0.82) 100%)",backdropFilter:"blur(18px)",WebkitBackdropFilter:"blur(18px)",border:"1.5px solid rgba(255,255,255,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.08)",borderRadius:"18px",minHeight:60,marginBottom:0,overflow:"hidden",padding:0},children:e.jsxs(v.Body,{className:"d-flex flex-row align-items-center justify-content-start gap-3 p-3",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px",backgroundColor:l.color+"20",color:l.color},children:l.icon}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"fw-semibold text-dark",style:{fontSize:"1rem",lineHeight:"1.2"},children:l.title}),e.jsx("div",{className:"text-muted small",style:{fontSize:"0.85rem",opacity:.8},children:l.subtitle})]})]})})},l.key))})]}),e.jsx(z,{transactions:i})]}):e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-3",style:{flex:1,minHeight:0},children:e.jsxs(R,{className:"g-3 align-items-start",style:{height:"100%"},children:[e.jsx(N,{xs:12,md:6,lg:6,style:{display:"flex",flexDirection:"column",height:"100%"},children:e.jsxs("div",{className:"h-100 d-flex flex-column justify-content-start",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h2",{className:"text-dark fw-bold mb-1",style:{fontSize:"2.1rem",marginTop:"0.5rem"},children:n?t("welcome",{name:r}):t("welcome",{name:"Demo"})}),e.jsx("div",{className:"text-primary fw-medium mb-2",style:{fontSize:"1.1rem",opacity:.85},children:e.jsx("span",{style:{fontStyle:"italic"},children:t("motivationalQuote")})})]}),e.jsxs("h3",{className:"text-dark fw-semibold mb-2 d-flex align-items-center gap-2",style:{fontSize:"1.15rem"},children:[e.jsx(S,{size:20})," ",t("quickActions")]}),e.jsx(R,{className:"g-2",children:f.map(l=>e.jsx(N,{xs:12,sm:12,md:12,lg:12,xxl:12,className:"mb-2",children:e.jsx(v,{className:"border-0 shadow-sm glass-card dashboard-glass",onClick:()=>b(l),style:{background:"linear-gradient(135deg, rgba(255,255,255,0.92) 0%, rgba(245,245,255,0.82) 100%)",backdropFilter:"blur(18px)",WebkitBackdropFilter:"blur(18px)",border:"1.5px solid rgba(255,255,255,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.08)",borderRadius:"18px",minHeight:60,marginBottom:0,overflow:"hidden",padding:0},children:e.jsxs(v.Body,{className:"d-flex flex-row align-items-center justify-content-start gap-3 p-3",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px",backgroundColor:l.color+"20",color:l.color},children:l.icon}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"fw-semibold text-dark",style:{fontSize:"1rem",lineHeight:"1.2"},children:l.title}),e.jsx("div",{className:"text-muted small",style:{fontSize:"0.85rem",opacity:.8},children:l.subtitle})]})]})})},l.key))})]})}),e.jsx(N,{xs:12,lg:6,style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"flex-start"},children:e.jsx(z,{transactions:i})})]})}),e.jsx(he,{show:c,onClose:()=>u(!1),transaction:null})]})},Oe=ce.memo(Ce);export{Oe as default};
