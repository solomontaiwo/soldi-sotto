import{r as u,B as Z,j as e,u as P,a as ee,c as K,P as b,b as W,d as q,e as M,f as S,F as te,m as U,g as se,h as re,R as ne,i as ae,k as ie,l as oe,n as le,o as ce,p as de,q as me,s as ue}from"./index-DhPDyLgL.js";import{T as xe}from"./TransactionModal-PAgarcjL.js";import{S as N,f as he}from"./formatCurrency-9CSuPI7Y.js";import{C as p}from"./Card-CRPIQ7jH.js";import{u as ge}from"./hook-mgdtgGYD.js";import{d as z,u as fe,a as pe,q as be}from"./Modal-CtcGh7Z4.js";import{u as ye}from"./useEventCallback-BQY3u4oO.js";import{R}from"./Row-B3jRwWjC.js";import{C}from"./Col-BtPTxbzW.js";import"./categories-zf97789g.js";import"./Form-DqIPrd7s.js";function je(){const[,s]=u.useReducer(i=>i+1,0);return s}const T=u.createContext(null),I=(s,i=null)=>s!=null?String(s):i||null,A=u.createContext(null);A.displayName="NavContext";const H=u.createContext(null),ve=["as","active","eventKey"];function we(s,i){if(s==null)return{};var n={};for(var o in s)if({}.hasOwnProperty.call(s,o)){if(i.indexOf(o)>=0)continue;n[o]=s[o]}return n}function Q({key:s,onClick:i,active:n,id:o,role:c,disabled:l}){const h=u.useContext(T),x=u.useContext(A),d=u.useContext(H);let t=n;const r={role:c};if(x){!c&&x.role==="tablist"&&(r.role="tab");const m=x.getControllerId(s??null),a=x.getControlledId(s??null);r[z("event-key")]=s,r.id=m||o,t=n==null&&s!=null?x.activeKey===s:n,(t||!(d!=null&&d.unmountOnExit)&&!(d!=null&&d.mountOnEnter))&&(r["aria-controls"]=a)}return r.role==="tab"&&(r["aria-selected"]=t,t||(r.tabIndex=-1),l&&(r.tabIndex=-1,r["aria-disabled"]=!0)),r.onClick=ye(m=>{l||(i?.(m),s!=null&&h&&!m.isPropagationStopped()&&h(s,m))}),[r,{isActive:t}]}const G=u.forwardRef((s,i)=>{let{as:n=Z,active:o,eventKey:c}=s,l=we(s,ve);const[h,x]=Q(Object.assign({key:I(c,l.href),active:o},l));return h[z("active")]=x.isActive,e.jsx(n,Object.assign({},l,h,{ref:i}))});G.displayName="NavItem";const Ne=["as","onSelect","activeKey","role","onKeyDown"];function Ce(s,i){if(s==null)return{};var n={};for(var o in s)if({}.hasOwnProperty.call(s,o)){if(i.indexOf(o)>=0)continue;n[o]=s[o]}return n}const O=()=>{},E=z("event-key"),_=u.forwardRef((s,i)=>{let{as:n="div",onSelect:o,activeKey:c,role:l,onKeyDown:h}=s,x=Ce(s,Ne);const d=je(),t=u.useRef(!1),r=u.useContext(T),m=u.useContext(H);let a,j;m&&(l=l||"tablist",c=m.activeKey,a=m.getControlledId,j=m.getControllerId);const y=u.useRef(null),B=g=>{const f=y.current;if(!f)return null;const w=be(f,`[${E}]:not([aria-disabled=true])`),k=f.querySelector("[aria-selected=true]");if(!k||k!==document.activeElement)return null;const $=w.indexOf(k);if($===-1)return null;let v=$+g;return v>=w.length&&(v=0),v<0&&(v=w.length-1),w[v]},F=(g,f)=>{g!=null&&(o?.(g,f),r?.(g,f))},J=g=>{if(h?.(g),!m)return;let f;switch(g.key){case"ArrowLeft":case"ArrowUp":f=B(-1);break;case"ArrowRight":case"ArrowDown":f=B(1);break;default:return}f&&(g.preventDefault(),F(f.dataset[pe("EventKey")]||null,g),t.current=!0,d())};u.useEffect(()=>{if(y.current&&t.current){const g=y.current.querySelector(`[${E}][aria-selected=true]`);g?.focus()}t.current=!1});const X=fe(i,y);return e.jsx(T.Provider,{value:F,children:e.jsx(A.Provider,{value:{role:l,activeKey:I(c),getControlledId:a||O,getControllerId:j||O},children:e.jsx(n,Object.assign({},x,{onKeyDown:J,ref:X,role:l}))})})});_.displayName="Nav";const ke=Object.assign(_,{Item:G}),V=u.forwardRef(({bsPrefix:s,active:i,disabled:n,eventKey:o,className:c,variant:l,action:h,as:x,...d},t)=>{s=P(s,"list-group-item");const[r,m]=Q({key:I(o,d.href),active:i,...d}),a=ee(y=>{if(n){y.preventDefault(),y.stopPropagation();return}r.onClick(y)});n&&d.tabIndex===void 0&&(d.tabIndex=-1,d["aria-disabled"]=!0);const j=x||(h?d.href?"a":"button":"div");return e.jsx(j,{ref:t,...d,...r,onClick:a,className:K(c,s,m.isActive&&"active",n&&"disabled",l&&`${s}-${l}`,h&&`${s}-action`)})});V.displayName="ListGroupItem";const Y=u.forwardRef((s,i)=>{const{className:n,bsPrefix:o,variant:c,horizontal:l,numbered:h,as:x="div",...d}=ge(s,{activeKey:"onSelect"}),t=P(o,"list-group");let r;return l&&(r=l===!0?"horizontal":`horizontal-${l}`),e.jsx(ke,{ref:i,...d,as:x,className:K(n,t,c&&`${t}-${c}`,r&&`${t}-${r}`,h&&`${t}-numbered`)})});Y.displayName="ListGroup";const L=Object.assign(Y,{Item:V}),D=({transactions:s=[],loading:i=!1})=>{D.propTypes={transactions:b.arrayOf(b.shape({id:b.string.isRequired,description:b.string.isRequired,amount:b.number.isRequired,type:b.oneOf(["income","expense"]).isRequired,date:b.object.isRequired,category:b.string})),loading:b.bool};const n=W(),o=q({maxWidth:768}),{t:c}=M(),l=[...s].sort((t,r)=>{const m=t.date?.toDate?t.date.toDate():new Date(t.date);return(r.date?.toDate?r.date.toDate():new Date(r.date)).getTime()-m.getTime()}).slice(0,5),h=t=>(t.toDate?t.toDate():new Date(t)).toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"}),x=t=>t==="income"?e.jsx(se,{style:{color:"#198754"}}):e.jsx(re,{style:{color:"#dc3545"}}),d=t=>t?c("categories."+t):"";return i?e.jsx(p,{className:"border-0 shadow-sm",style:{borderRadius:"2rem",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:e.jsx(p.Body,{className:"p-4",children:[...Array(5)].map((t,r)=>e.jsxs("div",{className:"d-flex align-items-center mb-3",style:{minHeight:56},children:[e.jsx(N,{circle:!0,width:40,height:40,style:{marginRight:16}}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx(N,{height:16,width:120,style:{marginBottom:6}}),e.jsx(N,{height:12,width:80})]}),e.jsx(N,{height:18,width:60})]},r))})}):l.length===0?e.jsx(p,{className:"border-0 shadow-sm",style:{borderRadius:"2rem",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:e.jsxs(p.Body,{className:"text-center p-5",children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"ðŸ“‹"}),e.jsx("h5",{className:"text-muted mb-3",children:c("recentTransactions.emptyTitle")}),e.jsx("p",{className:"text-muted mb-4",children:c("recentTransactions.emptyDescription")}),e.jsx(S,{variant:"primary",onClick:()=>n("/transactions"),style:{borderRadius:"20px",paddingLeft:"2rem",paddingRight:"2rem"},children:c("recentTransactions.addFirst")})]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx("h4",{className:"text-dark fw-semibold mb-0",children:c("recentTransactions.title")}),e.jsxs(S,{variant:"link",onClick:()=>n("/transactions"),className:"text-primary text-decoration-none p-0 d-flex align-items-center gap-2",children:[c("recentTransactions.viewAll"),e.jsx(te,{size:16})]})]}),s.length>0&&e.jsxs("div",{style:{fontSize:"1rem",color:"#6c757d",fontWeight:400,marginBottom:18,display:"flex",alignItems:"center",gap:4},children:[e.jsx("span",{children:Math.min(s.length,5)}),e.jsx("span",{style:{margin:"0 2px"},children:c("of")}),e.jsx("span",{children:s.length})]}),e.jsxs(p,{className:"border-0 shadow-sm recent-transactions-card",style:{borderRadius:"2rem",background:"rgba(255,255,255,0.04)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",border:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx(L,{variant:"flush",children:l.map((t,r)=>e.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:r*.1},children:e.jsx(L.Item,{className:"border-0 py-3 px-4",style:{cursor:"pointer",transition:"background-color 0.2s ease",backgroundColor:"transparent",borderRadius:r===0?"2rem 2rem 0 0":r===l.length-1?"0 0 2rem 2rem":"0"},onMouseEnter:m=>{m.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.05)"},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="transparent"},onClick:()=>n("/transactions"),children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between w-100",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3 flex-grow-1",style:{minWidth:0},children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"40px",height:"40px",backgroundColor:t.type==="income"?"rgba(25, 135, 84, 0.1)":"rgba(220, 53, 69, 0.1)",fontSize:"20px"},children:x(t.type)}),e.jsxs("div",{className:"flex-grow-1",style:{minWidth:0},children:[e.jsx("div",{className:"fw-medium text-dark mb-1",style:{fontSize:"1rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.description}),e.jsxs("div",{className:"d-flex align-items-center gap-2 text-muted small",children:[e.jsx("span",{children:h(t.date)}),t.category&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{style:{textTransform:"capitalize"},children:d(t.category)})]})]})]})]}),e.jsx("div",{className:"text-end flex-shrink-0",children:e.jsxs("div",{className:"fw-semibold",style:{fontSize:o?"1rem":"1.125rem",color:t.type==="income"?"#198754":"#dc3545"},children:[t.type==="income"?"+":"-",he(t.amount)]})})]})})},t.id))}),e.jsx(p.Footer,{className:"border-0 text-center py-3",style:{background:"rgba(255,255,255,0.04)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",borderRadius:"0 0 2rem 2rem",borderTop:"1px solid rgba(255,255,255,0.08)"},children:e.jsxs(S,{variant:"link",onClick:()=>n("/transactions"),className:"text-primary text-decoration-none small fw-medium",children:[c("recentTransactions.manageAll")," â†’"]})})]})]})},Se=()=>{const s=W(),{currentUser:i}=ae(),{transactions:n,isDemo:o,canAddMoreTransactions:c,loading:l}=ie(),[h,x]=u.useState(!1),d=q({maxWidth:768}),{t}=M();u.useEffect(()=>{(async()=>{i?.uid&&(await de(me(ue,"users",i.uid))).exists()})()},[i]);const r=u.useMemo(()=>[{key:"add-transaction",title:`âž• ${t("addTransaction")}`,subtitle:t("whatToRegister"),icon:e.jsx(oe,{size:24}),color:"var(--accent-primary)",bgColor:"var(--pastel-sky)",action:()=>x(!0),disabled:o&&!c,primary:!0},{key:"view-transactions",title:`ðŸ“‹ ${t("manageAll")}`,subtitle:t("yourTransactions"),icon:e.jsx(le,{size:24}),color:"var(--accent-info)",bgColor:"var(--pastel-sky)",action:()=>s("/transactions")},{key:"view-analytics",title:`ðŸ“Š ${t("navbar.analytics")}`,subtitle:t("landing.mainFeatures"),icon:e.jsx(ce,{size:24}),color:"var(--accent-warning)",bgColor:"var(--pastel-cream)",action:()=>s("/analytics")}],[o,c,s,t]),m=a=>{a.disabled||a.action()};return e.jsxs("div",{style:{padding:d?"1.2rem 0.5rem 2.5rem 0.5rem":"2.5rem 0 0 0",maxWidth:"1200px",margin:"0 auto",color:"var(--text-primary)",boxSizing:"border-box",display:"flex",flexDirection:"column",gap:"1.5rem",minHeight:0,background:"var(--background-primary)"},children:[d?e.jsxs("div",{style:{width:"100%",margin:0,padding:0},children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h2",{className:"text-dark fw-bold mb-1",style:{fontSize:"1.35rem"},children:[i?e.jsx("span",{style:{fontSize:"1.5rem"},children:"ðŸ‘‹"}):e.jsx("span",{style:{fontSize:"1.5rem"},children:"ðŸ‘‹"})," ",t("welcome")]}),e.jsx("div",{className:"text-primary fw-medium mb-2",style:{fontSize:"1rem",opacity:.85},children:e.jsx("span",{style:{fontStyle:"italic"},children:t("motivationalQuote")})}),e.jsx(R,{className:"g-2",children:r.map(a=>e.jsx(C,{xs:12,children:e.jsx(p,{className:"border-0 shadow-sm glass-card dashboard-glass",onClick:()=>m(a),style:{background:"linear-gradient(135deg, rgba(255,255,255,0.92) 0%, rgba(245,245,255,0.82) 100%)",backdropFilter:"blur(18px)",WebkitBackdropFilter:"blur(18px)",border:"1.5px solid rgba(255,255,255,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.08)",borderRadius:"18px",minHeight:60,marginBottom:0,overflow:"hidden",padding:0},children:e.jsxs(p.Body,{className:"d-flex flex-row align-items-center justify-content-start gap-3 p-3",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px",backgroundColor:a.color+"20",color:a.color},children:a.icon}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"fw-semibold text-dark",style:{fontSize:"1rem",lineHeight:"1.2"},children:a.title}),e.jsx("div",{className:"text-muted small",style:{fontSize:"0.85rem",opacity:.8},children:a.subtitle})]})]})})},a.key))})]}),e.jsx(D,{transactions:n,loading:l}),e.jsx("div",{style:{height:d?24:0}})]}):e.jsx(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-3",style:{flex:1,minHeight:0},children:e.jsxs(R,{className:"g-3 align-items-start",style:{height:"100%"},children:[e.jsx(C,{xs:12,md:6,lg:6,style:{display:"flex",flexDirection:"column",height:"100%"},children:e.jsxs("div",{className:"h-100 d-flex flex-column justify-content-start",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("h2",{className:"text-dark fw-bold mb-1",style:{fontSize:"2.1rem",marginTop:"0.5rem"},children:[i?e.jsx("span",{style:{fontSize:"1.5rem"},children:"ðŸ‘‹"}):e.jsx("span",{style:{fontSize:"1.5rem"},children:"ðŸ‘‹"})," ",t("welcome")]}),e.jsx("div",{className:"text-primary fw-medium mb-2",style:{fontSize:"1.1rem",opacity:.85},children:e.jsx("span",{style:{fontStyle:"italic"},children:t("motivationalQuote")})})]}),e.jsx(R,{className:"g-2",children:r.map(a=>e.jsx(C,{xs:12,sm:12,md:12,lg:12,xxl:12,className:"mb-2",children:e.jsx(p,{className:"border-0 shadow-sm glass-card dashboard-glass",onClick:()=>m(a),style:{background:"linear-gradient(135deg, rgba(255,255,255,0.92) 0%, rgba(245,245,255,0.82) 100%)",backdropFilter:"blur(18px)",WebkitBackdropFilter:"blur(18px)",border:"1.5px solid rgba(255,255,255,0.25)",boxShadow:"0 4px 16px rgba(0,0,0,0.08)",borderRadius:"18px",minHeight:60,marginBottom:0,overflow:"hidden",padding:0},children:e.jsxs(p.Body,{className:"d-flex flex-row align-items-center justify-content-start gap-3 p-3",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px",backgroundColor:a.color+"20",color:a.color},children:a.icon}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"fw-semibold text-dark",style:{fontSize:"1rem",lineHeight:"1.2"},children:a.title}),e.jsx("div",{className:"text-muted small",style:{fontSize:"0.85rem",opacity:.8},children:a.subtitle})]})]})})},a.key))})]})}),e.jsx(C,{xs:12,lg:6,style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"flex-start"},children:e.jsx(D,{transactions:n,loading:l})})]})}),e.jsx(xe,{show:h,onClose:()=>x(!1),transaction:null})]})},Le=ne.memo(Se);export{Le as default};
